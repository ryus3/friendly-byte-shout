// قاعدة بيانات المناطق والمدن العراقية
export const iraqiRegions = {
  "بغداد": [
    "الكرادة", "الكاظمية", "الأعظمية", "الرشيد", "الرصافة", "الكرخ", 
    "الدورة", "الشعلة", "حي العامل", "الشعب", "الثورة", "بغداد الجديدة",
    "زيونة", "الجادرية", "المنصور", "الحرية", "الغزالية", "العطيفية",
    "الوزيرية", "الجامعة", "المأمون", "الإسكان", "الخضراء", "القادسية"
  ],
  "البصرة": [
    "العشار", "الزبير", "أبو الخصيب", "الفاو", "القرنة", "المدينة",
    "الطويسة", "الهارثة", "شط العرب", "الجبايش", "كوت الحجاج", "الدير"
  ],
  "نينوى": [
    "الموصل", "تلعفر", "سنجار", "الشيخان", "الحمدانية", "تلكيف",
    "القوش", "برطلة", "كرمليس", "بعشيقة", "الحضر", "المحلبية"
  ],
  "أربيل": [
    "أربيل", "كويسنجق", "شقلاوة", "سوران", "رواندوز", "كوية",
    "مخمور", "ديانا", "حرير", "سيدكان", "جومان", "بارزان"
  ],
  "السليمانية": [
    "السليمانية", "دوكان", "رانية", "قلادزة", "كفري", "دربندخان",
    "حلبجة", "خورمال", "شارزور", "بينجوين", "ماوت", "قرة داغ"
  ],
  "دهوك": [
    "دهوك", "زاخو", "العمادية", "أكرة", "سيميل", "سرسنك",
    "باتيل", "باردرش", "كاني ماسي", "برافي", "جامانكي"
  ],
  "كركوك": [
    "كركوك", "طوزخورماتو", "الحويجة", "دبس", "داقوق", "التون كوبري",
    "مولتكة", "ليلان", "تسعين", "راهيم آوا", "كركوك الجديدة"
  ],
  "الأنبار": [
    "الرمادي", "الفلوجة", "القائم", "حديثة", "هيت", "عنه",
    "راوة", "كبيسة", "الرطبة", "الحبانية", "التنف", "البغدادي"
  ],
  "صلاح الدين": [
    "تكريت", "سامراء", "بيجي", "الشرقاط", "طوزخورماتو", "بلد",
    "الضلوعية", "سلطان بيلي", "الاسحاقي", "المعتصم", "الطار"
  ],
  "ديالى": [
    "بعقوبة", "المقدادية", "خانقين", "كفري", "الخالص", "بلدروز",
    "كنعان", "هبهب", "قرة تبة", "العظيم", "جلولاء", "السعدية"
  ],
  "واسط": [
    "الكوت", "الحي", "النعمانية", "الصويرة", "بدرة", "جصان",
    "الموفقية", "الزبيدية", "شيخ سعد", "واسط", "الأحرار"
  ],
  "بابل": [
    "الحلة", "المحاويل", "المسيب", "الهاشمية", "كربلاء", "القاسم",
    "سدة الهندية", "الشوملي", "المدحتية", "الطليعة", "النيل"
  ],
  "كربلاء": [
    "كربلاء", "عين التمر", "الهندية", "الحصوة", "الجدول الغربي",
    "الحسينية", "خان الخضر", "الأخيضر", "طويريج", "الرحالية"
  ],
  "النجف": [
    "النجف", "الكوفة", "أبو صخير", "المناذرة", "الحيدرية",
    "الحيرة", "براثا", "الشبكة", "العباسية", "الجديدة"
  ],
  "القادسية": [
    "الديوانية", "عفك", "الشامية", "الحمزة", "غماس",
    "السنية", "نفر", "المهناوية", "سومر", "الدغارة"
  ],
  "المثنى": [
    "السماوة", "الرميثة", "الخضر", "السلمان", "الوركاء",
    "بوصية", "الدراجي", "الهجانة", "البصيرة"
  ],
  "ذي قار": [
    "الناصرية", "الشطرة", "سوق الشيوخ", "الرفاعي", "قلعة سكر",
    "الجبايش", "كرمة بني سعيد", "الفهود", "الإصلاح", "البطحاء"
  ],
  "ميسان": [
    "العمارة", "الميمونة", "قلعة صالح", "المجر الكبير", "الكحلاء",
    "علي الشرقي", "علي الغربي", "الحلفاية", "البشائر", "السلام"
  ]
};

// دالة للبحث عن المدينة بناءً على المنطقة
export const findCityByRegion = (regionName) => {
  if (!regionName || typeof regionName !== 'string') return null;
  
  const normalizedRegion = regionName.trim();
  
  for (const [city, regions] of Object.entries(iraqiRegions)) {
    if (regions.some(region => 
      region.includes(normalizedRegion) || 
      normalizedRegion.includes(region) ||
      region === normalizedRegion
    )) {
      return city;
    }
  }
  
  return null;
};

// دالة لاستخراج المنطقة من النص
export const extractRegionFromAddress = (address) => {
  if (!address || typeof address !== 'string') return null;
  
  const addressWords = address.split(/[،,\s]+/).filter(word => word.length > 2);
  
  for (const word of addressWords) {
    const foundCity = findCityByRegion(word);
    if (foundCity) {
      return { region: word, city: foundCity };
    }
  }
  
  return null;
};
#!/usr/bin/env node

import { execSync } from 'child_process'
import path from 'path'
import { fileURLToPath } from 'url'

const __dirname = path.dirname(fileURLToPath(import.meta.url))
const viteBinPath = path.join(__dirname, 'node_modules', '.bin', 'vite')

try {
  // Try direct path first
  execSync(`"${viteBinPath}" ${process.argv.slice(2).join(' ')}`, {
    stdio: 'inherit',
    cwd: __dirname
  })
} catch (error) {
  // Fallback to npx
  try {
    execSync(`npx vite ${process.argv.slice(2).join(' ')}`, {
      stdio: 'inherit',
      cwd: __dirname
    })
  } catch (npxError) {
    console.error('‚ùå Failed to start vite:', npxError.message)
    process.exit(1)
  }
}